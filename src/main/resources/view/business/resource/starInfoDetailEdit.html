<!DOCTYPE html>
<!--解决idea thymeleaf 表达式模板报红波浪线-->
<!--suppress ALL -->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- 引入公用部分 -->
    <script th:replace="common/head::static"></script>
    <!-- 样式 -->
    <link th:href="@{/business/resource/css/starInfo.css}" rel="stylesheet" type="text/css"/>
</head>
<body>

<form class="layui-form" action="" lay-filter="starInfoForm">

    <div class="layui-form-item" style="display:none">
        <label class="layui-form-label">id</label>
        <div class="layui-input-block">
            <input type="text" th:value="${editStarInfo.id}" name="id" lay-verify="required" autocomplete="off" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">昵称</label>
            <div class="layui-input-inline">
                <input th:value="${editStarInfo.nickName}" type="text" name="nickName" lay-verify="required" lay-reqtext="昵称为必填项" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">报价</label>
            <div class="layui-input-inline">
                <input th:value="${editStarInfo.price}" type="text" name="price" lay-verify="required|number" lay-reqtext="报价为必填项" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">报价更新时间</label>
            <div class="layui-input-inline">
                <input type="text" class="layui-input" th:value="${editStarInfo.priupdateTimeStr}" name="priupdateTime" id="priupdateTime" placeholder="yyyy-MM-dd HH:mm:ss">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">主页链接</label>
        <div class="layui-input-block">
            <input type="text" th:value="${editStarInfo.personUrl}" name="personUrl" lay-verify="required" lay-reqtext="个人主页链接是必填项" autocomplete="off" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">内容形式</label>
        <div class="layui-input-inline">
            <select th:field="${editStarInfo.contentSharp}" name="contentSharp" lay-filter="contentSharp">
                <option value=""></option>
                <option value="1">图文</option>
                <option value="2">视频</option>
            </select>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">联系方式</label>
            <div class="layui-input-inline">
                <input type="text"  th:field="${editStarInfo.contact}"  name="contact" lay-verify="required" autocomplete="off" class="layui-input">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">粉丝数量</label>
            <div class="layui-input-inline">
                <input th:value="${editStarInfo.fansCount}" type="text" name="fansCount" lay-verify="required|number" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">点赞收藏总量</label>
            <div class="layui-input-inline">
                <input th:value="${editStarInfo.likeCount}" type="text" name="likeCount" lay-verify="required|number" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">平均点赞数</label>
            <div class="layui-input-inline">
                <input th:value="${editStarInfo.avgLike}" type="text" name="avgLike" lay-verify="required|number" autocomplete="off" class="layui-input">
            </div>
        </div>
    </div>

    <div class="layui-form-item" pane="">
        <label class="layui-form-label">账号标签</label>
        <div class="layui-input-block" id="accountTypeCheckBox">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'美妆个护')}" type="checkbox" name="美妆个护" lay-skin="primary" value="美妆个护" title="美妆个护">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'时尚')}" type="checkbox" name="时尚" lay-skin="primary" value="时尚" title="时尚">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'美食')}" type="checkbox" name="美食" lay-skin="primary" title="美食" value="美食">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'母婴')}" type="checkbox" name="母婴" lay-skin="primary" title="母婴" value="母婴">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'家居家装')}" type="checkbox" name="家居家装" lay-skin="primary" title="家居家装" value="家居家装">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'数码科技')}" type="checkbox" name="数码科技" lay-skin="primary" title="数码科技" value="数码科技">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'运动健身')}" type="checkbox" name="运动健身" lay-skin="primary" title="运动健身" value="运动健身">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'摄影')}" type="checkbox" name="摄影" lay-skin="primary" title="摄影" value="摄影">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'旅行')}" type="checkbox" name="旅行" lay-skin="primary" title="旅行" value="旅行">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'穿搭')}" type="checkbox" name="穿搭" lay-skin="primary" title="穿搭" value="穿搭">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'剧情')}" type="checkbox" name="剧情" lay-skin="primary" title="剧情" value="剧情">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'探店')}" type="checkbox" name="探店" lay-skin="primary" title="探店" value="探店">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'好物分享')}" type="checkbox" name="好物分享" lay-skin="primary" title="好物分享" value="好物分享">
            <input th:checked="${#strings.contains(editStarInfo.accountLabel,'其他')}" type="checkbox" name="其他" lay-skin="primary" title="其他" value="其他">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">账号等级</label>
        <div class="layui-input-block">
            <input th:checked="${editStarInfo.accountLevel} eq 'S'" type="radio" name="accountLevel" value="S" title="S">
            <input th:checked="${editStarInfo.accountLevel} eq 'A'" type="radio" name="accountLevel" value="A" title="A">
            <input th:checked="${editStarInfo.accountLevel} eq 'B'" type="radio" name="accountLevel" value="B" title="B">
            <input th:checked="${editStarInfo.accountLevel} eq 'C'" type="radio" name="accountLevel" value="C" title="C">
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block" style="text-align: center">
            <button type="submit" class="layui-btn" lay-submit="" lay-filter="updateStarInfo">立即提交</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>
</body>

<script>
    layui.use(['form'], function(){
        var form = layui.form
            ,laydate = layui.laydate
            ,layer = layui.layer;

        //日期时间选择器
        laydate.render({
            elem: '#priupdateTime'
            ,type: 'datetime'
        });
        //监听提交
        form.on('submit(updateStarInfo)', function(data){
            var arr_box = [];
            $('#accountTypeCheckBox input[type=checkbox]:checked').each(function() {
                arr_box.push($(this).val());
            });
            //账户标签数组
            data.field.accountLabel = arr_box.join(',');

            // console.log('提交信息：'+JSON.stringify(data.field))
            $.ajax({
                url: ctx + "/starInfo/update",
                type: "POST",
                contentType: 'application/json',//发送格式（JSON串）
                data: JSON.stringify(data.field),//发送参数（JSON串）
                success: function (result) {
                    //TODO 无法展示
                    layer.msg("操作成功");
                    var index = parent.layer.getFrameIndex(window.name);//先得到当前iframe层的索引
                    parent.layer.close(index); //再执行关闭
                },
                error:function (result){
                    layer.msg(data.msg, {icon: 2, time: 2000}, function () {});
                }
            });
            return false;
        });

    });


</script>

<!-- js -->
<!--<script th:src="@{/resourcepool/js/starInfo.js}"></script>-->

</html>